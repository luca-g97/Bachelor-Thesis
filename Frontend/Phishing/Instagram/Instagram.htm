<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Instagram</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<!-- Start of my insert -->
<style>
    body, html {
        height: 100%;
        margin: 0;
        background-color: black;
    }
    #explanation{
        z-index: 50;
        position: fixed;
        background-color: black;
        width: 30%;
        left: 70%;
        height: 100%;
        border: 2px solid black;
        font-family: 'Open Sans',sans-serif;
    }
    .information {
        color: whitesmoke;
        background-color: #111111;
        text-align: center;
        font-weight: bold;
        height: 10%;
        padding: 2%;
    }
    .informationChoice {
        user-select: none;
        padding: 1.7%;
        color: white;
        border: 1px solid #333333;
        width: 33%;
        text-align: center;
        background-color: black;
        cursor: pointer;
        border-radius: 2%;
    }
    .flex-container {
        display: flex;
        flex-wrap: nowrap;
        overflow: auto;
    }
    .flex-item {
        user-select: none;
        flex: 0 0 auto;
        width: 20%;
        height:20%;
        text-align: center;
        vertical-align: middle;
        background-color: black;
        border: 1px solid #333333;
        cursor: pointer;
    }
    .disclaimer{
        font-family: 'Open Sans',sans-serif;
        width: 70%;
        padding: 0.7%;
        text-align: center;
        color: orangered;
        font-size: 1.5em;
        font-weight: bold;
        background-color: #111111
    }
    .picked {
        background-color: #222222;
    }
    .flex-item:hover, .switchSite:hover, .informationChoice:hover{
        background-color: #333333;
    }
    .pictures{
        position: absolute;
        left: 14.55%;
        top: 33%;
        width: 55.5%;
        z-index: 50;
        height: 32.5%;
    }
    .close{
        position: absolute;
        z-index: -50;
        width: 70%;
        height: 100%;
    }
    .switchSite {
        padding: 0.5%;
        opacity: 0.8;
        background-color: black;
        border-radius: 10px;
        cursor: pointer;
        color: whitesmoke;
        font-weight: bold;
        border: 3px solid orangered;
    }
    .feather {
        vertical-align: bottom;
    }
</style>
<!-- Need to be called before the elements, so the elements know what to do onclick -->
<script src="https://unpkg.com/feather-icons"></script>
<script>
    var currentlyPicked = null;

    function showExplanation(element)
    {
        var currentlyClickedVulnerability = element.id;

        if(currentlyPicked != null)
        {
            currentlyPicked.classList.remove("picked");
        }

        element.classList.add("picked");
        currentlyPicked = element;

        newSource = "../Vulnerabilities/" + currentlyClickedVulnerability + "/Explanation.htm";
        localStorage.setItem("OpenedInPhishing", currentlyClickedVulnerability);
        document.getElementById("website").setAttribute("src", newSource);
    }
</script>
<div id="explanation">
    <div id="choice"><div id="0" class="information"></div>
        <div class="information"><table style="width: 100%"><tr>
            <td id="1" class="informationChoice" onclick="showExplanation(this)"></td>
        </tr></table></div></div>
    <embed id="website" src="" width="100%" style="background-color: transparent">
    <div id="vulnerabilities"><div id="2" class="information"></div>
        <div class="flex-container"><table style="width:100%"><tr>
            <td id="MalwarePhishing" class="flex-item" title="Malware Phishing" onclick="showExplanation(this)"><img src="../../Logo.png" style="width:100px; height:100px"></td>
            <td id="AccountPhishing" class="flex-item" title="Account Phishing" onclick="showExplanation(this)"><img src="../../Logo.png" style="width:100px; height:100px"></td>
            <td id="SocialEngineering" class="flex-item" title="Social Engineering" onclick="showExplanation(this)"><img src="../../Logo.png" style="width:100px; height:100px"></td>
        </tr></table></div></div>
</div>

<!-- Needs to be called here, because otherwise the elements are not known yet -->
<script>
    var german = ["  ", "Erklärung und Hilfe",
        "Wechseln Sie zwischen den Erklärungen per Klick"];

    var english = ["  ", "Explanation and Help",
        "Switch between the explanations by clicking on the desired"];

    var languageToUse = english;
    if (localStorage.getItem("language") === "German")
    {
        languageToUse = german;
    }

    for (var i = 0; i < languageToUse.length; i++)
    {
        document.getElementById(i.toString()).innerText = languageToUse[i];
    }
    var tabToOpen = "MalwarePhishing";
    if(localStorage.getItem("OpenedInPhishing") !== null){
        tabToOpen = localStorage.getItem("OpenedInPhishing");
    }
    showExplanation(document.getElementById(tabToOpen), "");
    feather.replace();

    var choice = document.getElementById("choice").offsetHeight;
    var vulnerabilities = document.getElementById("vulnerabilities").offsetHeight;
    document.getElementById("website").style.height = document.getElementById("explanation").offsetHeight - document.getElementById("explanation").offsetHeight * 0.01 - choice - vulnerabilities+ "px";
    
    function changeSite(site)
    {
        var clickable = "";
        var unclickable = "";
        if (site === "Startpage") {
            clickable = document.getElementsByClassName("pictures");
            unclickable = document.getElementsByClassName("close");
        }
        else {
            clickable = document.getElementsByClassName("close");
            unclickable = document.getElementsByClassName("pictures");
        }
        setZIndex(clickable, 50);
        setZIndex(unclickable, -50);
        document.getElementById("instagram").setAttribute("src", site + ".png")
    }
    
    function setZIndex(clickType, zIndex)
    {
        for (var i = 0; i < clickType.length; i++)
        {
            clickType[i].style.zIndex = zIndex;
        }
    }

    //https://web.dev/resize-observer/
    var ro = new ResizeObserver(entries => {
         for (let entry of entries) {
             var choice = document.getElementById("choice").offsetHeight;
             var vulnerabilities = document.getElementById("vulnerabilities").offsetHeight;
             document.getElementById("website").style.height = document.getElementById("explanation").offsetHeight - document.getElementById("explanation").offsetHeight * 0.01 - choice - vulnerabilities+ "px";
         }
    });

    // Observe one or multiple elements
    ro.observe(document.getElementById("explanation"));
</script>
<!-- End of my insert -->
<body>
<div class="disclaimer">This website is just a clone for presentation purposes, it is NOT the real one! &nbsp;&nbsp;&nbsp;<button class="switchSite" onclick="window.location.assign('../../../CommandProcessor.php?action=ChangeWebsite&website=/index.htm')"><i class='feather' data-feather='home' style="color: whitesmoke"></i>&nbsp; Home</button></div>
<script>feather.replace();</script>
<table class="pictures"><tr><td onclick="changeSite('Family')"></td><td onclick="changeSite('Birthday')"></td><td onclick="changeSite('Brunch')"></td></tr></table>
<div class="close" onclick="changeSite('Startpage')"></div>
<img id="instagram" src="Startpage.png" width="70%" height="100%" alt="Instagram page">
</body>
</html>