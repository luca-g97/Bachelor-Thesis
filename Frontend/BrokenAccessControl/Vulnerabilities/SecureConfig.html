<!DOCTYPE html>
<html><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width"><title>SecureConfig.html</title><link rel="stylesheet" type="text/css" href="resource://content-accessible/viewsource.css"></head><body id="viewsource" class="wrap highlight" style="tab-size: 4"><pre id="line1"><span></span><span class="doctype">&lt;!DOCTYPE html&gt;</span><span>
<span id="line2"></span></span><span>&lt;<span class="start-tag">html</span>&gt;</span><span>
<span id="line3"></span></span><span>&lt;<span class="start-tag">head</span>&gt;</span><span>
<span id="line4"></span></span><span>&lt;<span class="start-tag">meta</span> <span class="attribute-name">http-equiv</span>="<a class="attribute-value">content-type</a>" <span class="attribute-name">content</span>="<a class="attribute-value">text/html; charset=utf-8</a>"<span>/</span>&gt;</span><span>
<span id="line5"></span></span><span>&lt;<span class="start-tag">title</span>&gt;</span><span></span><span>&lt;/<span class="end-tag">title</span>&gt;</span><span>
<span id="line6"></span></span><span>&lt;<span class="start-tag">meta</span> <span class="attribute-name">name</span>="<a class="attribute-value">generator</a>" <span class="attribute-name">content</span>="<a class="attribute-value">LibreOffice 7.4.3.2 (Linux)</a>"<span>/</span>&gt;</span><span>
<span id="line7"></span></span><span>&lt;<span class="start-tag">meta</span> <span class="attribute-name">name</span>="<a class="attribute-value">created</a>" <span class="attribute-name">content</span>="<a class="attribute-value">00:00:00</a>"<span>/</span>&gt;</span><span>
<span id="line8"></span></span><span>&lt;<span class="start-tag">meta</span> <span class="attribute-name">name</span>="<a class="attribute-value">changed</a>" <span class="attribute-name">content</span>="<a class="attribute-value">00:00:00</a>"<span>/</span>&gt;</span><span>
<span id="line9"></span></span><span>&lt;<span class="start-tag">style</span> <span class="attribute-name">type</span>="<a class="attribute-value">text/css</a>"&gt;</span><span>
<span id="line10"></span>@page { size: 8.27in 11.69in; margin: 0.79in }
<span id="line11"></span>p { line-height: 115%; margin-bottom: 0.1in; background: transparent }
<span id="line12"></span>pre { background: transparent }
<span id="line13"></span>pre.western { font-family: "Liberation Mono", monospace; font-size: 10pt }
<span id="line14"></span>pre.cjk { font-family: "NSimSun", monospace; font-size: 10pt }
<span id="line15"></span>pre.ctl { font-family: "Liberation Mono", monospace; font-size: 10pt }
<span id="line16"></span>	</span><span>&lt;/<span class="end-tag">style</span>&gt;</span><span>
<span id="line17"></span></span><span>&lt;/<span class="end-tag">head</span>&gt;</span><span>
<span id="line18"></span></span><span>&lt;<span class="start-tag">body</span> <span class="attribute-name">lang</span>="<a class="attribute-value">en-US</a>" <span class="attribute-name">link</span>="<a class="attribute-value">#000080</a>" <span class="attribute-name">vlink</span>="<a class="attribute-value">#800000</a>" <span class="attribute-name">dir</span>="<a class="attribute-value">ltr</a>"&gt;</span><span></span><span>&lt;<span class="start-tag">pre</span> <span class="attribute-name">class</span>="<a class="attribute-value">western</a>"&gt;</span><span># Default server definition
<span id="line19"></span>server {
<span id="line20"></span>listen [::]:8080 default_server;
<span id="line21"></span>listen 8080 default_server;
<span id="line22"></span>server_name secure;
<span id="line23"></span>
<span id="line24"></span>sendfile off;
<span id="line25"></span>tcp_nodelay on;
<span id="line26"></span>absolute_redirect off;
<span id="line27"></span>    
<span id="line28"></span><b># This is to avoid showing folder structure even after entering a /</b>
<span id="line29"></span><b><span style="color: green">autoindex off;</span></b>
<span id="line30"></span>
<span id="line31"></span>root /var/www/html;
<span id="line32"></span>index index.htm index.php index.html;
<span id="line33"></span>
<span id="line34"></span>location / {
<span id="line35"></span># First attempt to serve request as file, then
<span id="line36"></span># as directory, then fall back to index.php
<span id="line37"></span>try_files $uri $uri/ /index.php?q=$uri<span class="entity"><span>&amp;</span>amp;</span>$args;
<span id="line38"></span>}
<span id="line39"></span>
<span id="line40"></span>location /admin {
<span id="line41"></span>deny all;
<span id="line42"></span>#this should work for simple authentication, but it doesnÂ´t!
<span id="line43"></span>auth_basic<span class="entity"><span>&amp;</span>quot;</span>closed site<span class="entity"><span>&amp;</span>quot;</span>;
<span id="line44"></span>auth_basic_user_file conf/htpasswd;
<span id="line45"></span>}
<span id="line46"></span>
<span id="line47"></span># Redirect server error pages to the static page /50x.html
<span id="line48"></span>error_page 500 502 503 504 /50x.html;
<span id="line49"></span>location = /50x.html {
<span id="line50"></span>root /var/lib/nginx/html;
<span id="line51"></span>}
<span id="line52"></span>
<span id="line53"></span># Pass the PHP scripts to PHP-FPM listening on php-fpm.sock
<span id="line54"></span>location ~ \.php$ {
<span id="line55"></span>try_files $uri =404;
<span id="line56"></span>fastcgi_split_path_info ^(.+\.php)(/.+)$;
<span id="line57"></span>fastcgi_pass unix:/run/php-fpm.sock;
<span id="line58"></span>fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
<span id="line59"></span>fastcgi_param SCRIPT_NAME $fastcgi_script_name;
<span id="line60"></span>fastcgi_index index.php;
<span id="line61"></span>include fastcgi_params;
<span id="line62"></span>}
<span id="line63"></span>
<span id="line64"></span># Set the cache-control headers on assets to cache for 5 days
<span id="line65"></span>location ~* \.(jpg|jpeg|gif|png|css|js|ico|xml)$ {
<span id="line66"></span>expires 5d;
<span id="line67"></span>}
<span id="line68"></span>
<span id="line69"></span># Deny access to . files, for security
<span id="line70"></span>location ~ /\. {
<span id="line71"></span>log_not_found off;
<span id="line72"></span>deny all;
<span id="line73"></span>}
<span id="line74"></span>
<span id="line75"></span># Allow fpm ping and status from localhost
<span id="line76"></span>location ~ ^/(fpm-status|fpm-ping)$ {
<span id="line77"></span>access_log off;
<span id="line78"></span>allow 127.0.0.1;
<span id="line79"></span>deny all;
<span id="line80"></span>fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
<span id="line81"></span>include fastcgi_params;
<span id="line82"></span>fastcgi_pass unix:/run/php-fpm.sock;
<span id="line83"></span>}
<span id="line84"></span>}</span><span>&lt;/<span class="end-tag">pre</span>&gt;</span><span>
<span id="line85"></span></span><span>&lt;/<span class="end-tag">body</span>&gt;</span><span>
<span id="line86"></span></span><span>&lt;/<span class="end-tag">html</span>&gt;</span><span></span></pre></body></html>